<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Love's Elegant Book of Treats</title>
    <!-- Importing elegant & playful fonts: Allura & Fredoka One for headings, Nunito for body -->
    <link
        href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@300;400;600;700&family=Allura&display=swap"
        rel="stylesheet">
    <!-- Custom Heart Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23FF6B6B' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E"
        type="image/svg+xml">

    <style>
        /* --- Root Variables for Consistent Theming --- */
        :root {
            /* Main Color Palette (Soft, Elegant, Cartoony) */
            --primary-burgundy: #A52A2A;
            /* Rich, classic burgundy */
            --secondary-dusty-rose: #DDA0DD;
            /* Muted plum/dusty rose */
            --soft-gold: #DAA520;
            /* Goldenrod for accents */
            --dark-charcoal: #36454F;
            /* Deep charcoal for main text */
            --light-cream: #FBF8F6;
            /* Very light, creamy background */
            --pure-white: #FFFFFF;
            /* Pure white for card interiors */

            /* Coupon Card Background Colors (Soft Pastels) */
            --coupon-bg-1: #FFDDE2;
            /* Soft Pink */
            --coupon-bg-2: #D4F8E8;
            /* Mint Green */
            --coupon-bg-3: #FFE8D4;
            /* Peach */
            --coupon-bg-4: #F0E6F7;
            /* Lavender */
            --coupon-bg-5: #E0FFFF;
            /* Light Cyan */
            --coupon-bg-6: #FFFACD;
            /* Lemon Chiffon */


            /* General Styles */
            --border-radius-card: 18px;
            /* More rounded card corners */
            --border-radius-small: 8px;
            /* Smaller radius for buttons/tags */
            --shadow-subtle: 0 6px 20px rgba(0, 0, 0, 0.08);
            /* Softer, diffused shadow */
            --shadow-lift: 0 12px 30px rgba(0, 0, 0, 0.15);
            /* Pronounced lift shadow */
        }

        /* --- Global Styles & Reset --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Nunito', sans-serif;
            /* Clean, friendly sans-serif for body text */
            margin: 0;
            padding: 0;
            background-color: var(--light-cream);
            /* Soft, creamy background */
            color: var(--dark-charcoal);
            line-height: 1.6;
            overflow-x: hidden;
            /* Prevents horizontal scrollbar */
            scroll-behavior: smooth;
            /* Smooth scrolling for anchor links */
        }

        /* --- Main Header Styles --- */
        .main-header {
            background-color: var(--primary-burgundy);
            /* Rich burgundy for header background */
            color: var(--light-text-color);
            /* White text for contrast */
            padding: 50px 20px;
            text-align: center;
            box-shadow: var(--shadow-subtle);
            animation: fadeInDown 1s ease-out;
            position: relative;
            z-index: 100;
            overflow: hidden;
            border-bottom: 5px solid var(--soft-gold);
            /* Soft gold accent line */
        }

        .main-header h1 {
            font-family: 'Allura', cursive;
            /* Thin, light, cursive font as requested */
            font-size: 5.5em;
            /* Larger size for readability with cursive font */
            margin-bottom: 10px;
            letter-spacing: 2px;
            color: var(--pure-white);
            /* Ensure it's white/light against the dark background */
            text-shadow: none;
            /* Remove harsh text shadow */
            font-weight: 400;
            /* Allura is naturally light/thin */
        }

        .main-header p {
            font-family: 'Nunito', sans-serif;
            font-size: 1.5em;
            opacity: 0.95;
            font-weight: 300;
            /* Light font weight */
            color: var(--pure-white);
            /* Ensure it's white/light */
        }

        /* --- Coupon Container Grid Layout --- */
        .coupon-container {
            display: grid;
            /* Default to 2 columns on medium screens, scale down for mobile */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            padding: 50px 40px;
            max-width: 1400px;
            /* Max width to comfortably fit 4 columns */
            margin: 30px auto;
        }

        /* --- Responsive Grid Adjustments --- */
        @media (min-width: 1200px) {

            /* Force 4 columns on larger desktops */
            .coupon-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 992px) {

            /* 3 columns for tablets */
            .coupon-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {

            /* 2 columns for smaller tablets */
            .coupon-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {

            /* Single column for mobile */
            .coupon-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
        }

        /* --- Individual Coupon Card Styles --- */
        .coupon-card {
            background-color: var(--pure-white);
            border-radius: var(--border-radius-card);
            box-shadow: var(--shadow-soft);
            padding: 30px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;

            /* Initial state for card entrance animation */
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;

            /* Realistic Perforated Edges using masks */
            /* Ensure background does not extend beyond padding box */
            background-clip: padding-box;
            border: none;
            /* Remove any default borders as masks create the edge */

            /* Combine multiple radial gradients to create the "holes" on all sides */
            -webkit-mask-image:
                /* Top holes */
                radial-gradient(circle at 10px 0, transparent 9px, black 9px) 0 0 / 20px 20px repeat-x,
                /* Bottom holes */
                radial-gradient(circle at 10px 100%, transparent 9px, black 9px) 0 100% / 20px 20px repeat-x,
                /* Left holes */
                radial-gradient(circle at 0 10px, transparent 9px, black 9px) 0 0 / 20px 20px repeat-y,
                /* Right holes */
                radial-gradient(circle at 100% 10px, transparent 9px, black 9px) 100% 0 / 20px 20px repeat-y;
            mask-image:
                radial-gradient(circle at 10px 0, transparent 9px, black 9px) 0 0 / 20px 20px repeat-x,
                radial-gradient(circle at 10px 100%, transparent 9px, black 9px) 0 100% / 20px 20px repeat-x,
                radial-gradient(circle at 0 10px, transparent 9px, black 9px) 0 0 / 20px 20px repeat-y,
                radial-gradient(circle at 100% 10px, transparent 9px, black 9px) 100% 0 / 20px 20px repeat-y;

            /* How masks combine (standard property, -webkit- prefix for older safari) */
            -webkit-mask-composite: source-in;
            mask-composite: intersect;

            /* Fallback for older WebKit (if `source-in` is not supported) */
            @supports not (-webkit-mask-composite: source-in) {
                -webkit-mask-composite: border-box;
            }
        }


        /* Class added by JS when card is visible */
        .coupon-card.card-visible {
            opacity: 1;
            transform: translateY(0);
            transition-delay: var(--card-delay, 0s);
            /* Staggered delay */
        }

        .coupon-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lift);
        }

        .coupon-card.redeemed {
            opacity: 0.6;
            pointer-events: none;
            filter: grayscale(80%);
            position: relative;
            /* No direct border-color change here, as mask handles it */
            background-color: #f0f0f0;
        }

        /* "REDEEMED WITH LOVE!" Stamp */
        .coupon-card.redeemed::after {
            content: 'REDEEMED WITH LOVE!';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg);
            background-color: rgba(165, 42, 42, 0.9);
            /* Rich burgundy with transparency for stamp */
            color: var(--light-text-color);
            padding: 12px 25px;
            border-radius: var(--border-radius-small);
            font-family: 'Fredoka One', cursive;
            font-size: 1.8em;
            white-space: nowrap;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 10;
            border: 3px solid var(--soft-gold);
            /* Soft gold border for stamp */
        }

        .coupon-card h2 {
            font-family: 'Allura', cursive;
            /* Thin, light, little cursive font for coupon titles */
            font-size: 2.8em;
            /* Increased size for readability with cursive font */
            color: var(--primary-burgundy);
            /* Rich burgundy for coupon titles */
            margin-top: 0;
            margin-bottom: 15px;
            line-height: 1.2;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05);
            /* Very subtle text shadow */
        }

        .coupon-card p {
            font-family: 'Nunito', sans-serif;
            /* Clean, readable font for descriptions */
            font-size: 1.05em;
            color: var(--dark-charcoal);
            flex-grow: 1;
            margin-bottom: 25px;
            font-weight: 400;
        }

        .coupon-card .btn {
            background-color: var(--soft-gold);
            /* Soft gold button */
            color: var(--dark-charcoal);
            /* Dark charcoal text for button */
            border: none;
            padding: 14px 30px;
            border-radius: var(--border-radius-small);
            font-size: 1.15em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .coupon-card .btn:hover {
            background-color: #CCAA00;
            /* Slightly darker gold */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* 18+ Tag Styles */
        .coupon-card .tag-18plus {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(165, 42, 42, 0.9);
            /* Burgundy with transparency */
            color: var(--light-text-color);
            font-family: 'Nunito', sans-serif;
            font-size: 0.9em;
            padding: 6px 12px;
            border-radius: var(--border-radius-small);
            font-weight: bold;
            z-index: 5;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            border: 1px solid var(--secondary-dusty-rose);
            /* Dusty rose border */
        }

        /* --- Modal Styles --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            background-color: var(--pure-white);
            padding: 40px;
            border-radius: var(--border-radius-card);
            box-shadow: var(--shadow-lift);
            width: 90%;
            max-width: 450px;
            text-align: center;
            position: relative;
            animation: zoomIn 0.3s ease-out;
            border: 3px solid var(--secondary-dusty-rose);
            /* Dusty rose border for modal */
        }

        .modal-content p {
            font-size: 1.3em;
            margin-bottom: 30px;
            color: var(--dark-charcoal);
            font-weight: 500;
        }

        .close-button {
            color: var(--dark-charcoal);
            font-size: 35px;
            font-weight: bold;
            position: absolute;
            top: 15px;
            right: 25px;
            cursor: pointer;
            transition: color 0.2s;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--primary-burgundy);
        }

        .modal-buttons .btn {
            padding: 12px 25px;
            font-size: 1.1em;
            margin: 0 12px;
            border-radius: var(--border-radius-small);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .modal-buttons .btn-secondary {
            background-color: #ccc;
            color: var(--dark-charcoal);
        }

        .modal-buttons .btn-secondary:hover {
            background-color: #b0b0b0;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        /* --- Animations --- */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <header class="main-header">
        <h1>My Love's Elegant Book of Treats</h1>
        <p>A collection of special moments and gestures, just for you. With all my love, always.</p>
    </header>

    <main class="coupon-container">
        <!-- Coupons will be dynamically inserted here by JavaScript -->
    </main>

    <!-- Footer with inline CSS as requested -->
    <footer
        style="text-align: center; background-color: #FFECF0; padding: 20px; color: #8B0000; font-family: 'Nunito', sans-serif; font-size: 0.95em; box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.05); margin-top: 50px;">
        Made with ðŸ’– by someone who adores Niki | &copy; 2025 Crafted with infinite love and magic.
    </footer>

    <!-- Redemption Confirmation Modal -->
    <div id="redeemModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p>Are you sure you want to redeem this coupon?</p>
            <div class="modal-buttons">
                <button id="confirmRedeem" class="btn">Yes, Redeem!</button>
                <button id="cancelRedeem" class="btn btn-secondary">No, Not Yet</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const couponContainer = document.querySelector('.coupon-container');
            const redeemModal = document.getElementById('redeemModal');
            const confirmRedeemBtn = document.getElementById('confirmRedeem');
            const cancelRedeemBtn = document.getElementById('cancelRedeem');
            const closeModalBtn = document.querySelector('.close-button');

            let currentCouponId = null; // To store the ID of the coupon being redeemed

            // --- COUPON DATA ---
            const coupons = [
                // ROMANTIC & SWEET (50 Coupons)
                {id: 'c1', title: 'A Day of Infinite Cuddles', description: 'Redeem for a full day dedicated to snuggling, soft touches, and cozy comfort. Absolutely no agenda besides us.', is18Plus: false},
                {id: 'c2', title: 'The Heartfelt Love Letter', description: 'Redeem for a deeply personal, handwritten love letter revealing my sincerest feelings and appreciation for you.', is18Plus: false},
                {id: 'c3', title: 'Romantic Stargazing Night', description: 'Redeem for an enchanting evening under the stars, complete with blankets, warm drinks, and quiet conversation.', is18Plus: false},
                {id: 'c4', title: 'The "Yes, My Love" Day', description: 'For one delightful day, I will say "yes" to your reasonable and safe requests. Your wish is my command!', is18Plus: false},
                {id: 'c5', title: 'Surprise Fresh Flower Delivery', description: 'Redeem for a beautiful, hand-picked bouquet of your favorite flowers, delivered to you unexpectedly.', is18Plus: false},
                {id: 'c6', title: 'My Song for You', description: 'Redeem for me to learn and perform a song that uniquely captures our love or a special memory we share.', is18Plus: false},
                {id: 'c7', title: 'Intimate Kitchen Slow Dance', description: 'Redeem for a spontaneous, romantic slow dance in our kitchen (or any room!), just us and our favorite music.', is18Plus: false},
                {id: 'c8', title: 'A Morning of Sweet Dreams', description: 'Redeem for an undisturbed morning where you can sleep in as long as you wish, with no alarms or interruptions.', is18Plus: false},
                {id: 'c9', title: 'Curated "Reasons I Love You" Jar', description: 'Redeem for a decorative jar filled with brand new, handwritten notes detailing all the reasons why I adore you.', is18Plus: false},
                {id: 'c10', title: 'A Day of Pure Serenity', description: 'Redeem for a day where I consciously make every effort to avoid any disagreements or tension, ensuring peaceful vibes.', is18Plus: false},
                {id: 'c11', title: 'Your Favorite Outfit on Me', description: 'Redeem for me to wear your absolute favorite outfit of mine all day, just because I know you love it.', is18Plus: false},
                {id: 'c12', title: 'Hourly Compliment Boost', description: 'Redeem for me to give you a genuine, heartfelt compliment every hour for an entire day.', is18Plus: false},
                {id: 'c13', title: 'Stress-Melting Foot Massage', description: 'Redeem for a long, soothing foot massage to help you unwind and melt away any stress.', is18Plus: false},
                {id: 'c14', title: 'My Surprise Date Night Plan', description: 'Redeem for me to plan and execute a truly magical and surprising date night, tailored just for you.', is18Plus: false},
                {id: 'c15', title: 'Cozy Movie Night, Her Way', description: 'Redeem for a perfect movie night, where you choose all the films, snacks, and the ideal cuddling position.', is18Plus: false},
                {id: 'c16', title: 'Hand-Holding Marathon', description: 'Redeem for an extended period of just holding hands, walking together, or quietly sitting, soaking in our connection.', is18Plus: false},
                {id: 'c17', title: 'Comfort Food Cook-Off', description: 'Redeem for a fun culinary battle where we each make our favorite comfort foods and share the delicious results.', is18Plus: false},
                {id: 'c18', title: 'Visit to a Cuddly Animal Sanctuary', description: 'Redeem for a heartwarming visit to a local animal cafe, dog park, or shelter if you need some furry love.', is18Plus: false},
                {id: 'c19', title: 'Luxurious Bubble Bath & Candles', description: 'Redeem for me to draw you a decadent bubble bath, complete with scented candles, calming music, and undisturbed peace.', is18Plus: false},
                {id: 'c20', title: 'IOU: A Bookstore/Library Date', description: 'Redeem for a quiet, intellectual, and cozy date exploring a charming bookstore or serene library together.', is18Plus: false},
                {id: 'c21', title: 'Teach Me Your Passion', description: 'Redeem for an hour where you teach me about a hobby, topic, or passion that you deeply love and care about.', is18Plus: false},
                {id: 'c22', title: 'Karaoke Night (Our Duets Edition)', description: 'Redeem for a fun and possibly silly karaoke night, either at home or out, filled with our favorite duets.', is18Plus: false},
                {id: 'c23', title: 'Collaborative Puzzle Evening', description: 'Redeem for a relaxing and engaging evening spent working on a challenging jigsaw puzzle together, with snacks.', is18Plus: false},
                {id: 'c24', title: 'Plant a New Life Together', description: 'Redeem for us to go plant shopping and plant a beautiful flower or herb together, nurturing it as it grows.', is18Plus: false},
                {id: 'c25', title: 'Personalized Affirmation Card', description: 'Redeem for a beautifully designed card filled with uplifting affirmations and genuine compliments tailored just for you.', is18Plus: false},
                {id: 'c26', title: 'Couples Guided Meditation', description: 'Redeem for me to lead you through a calming and connecting guided meditation session for couples.', is18Plus: false},
                {id: 'c27', title: 'Shared Random Act of Kindness', description: 'Redeem for us to perform a small, anonymous act of kindness for a stranger, spreading a little joy together.', is18Plus: false},
                {id: 'c28', title: 'Explore a Local Market/Fair', description: 'Redeem for a fun outing exploring a vibrant local farmer\'s market, charming craft fair, or lively festival.', is18Plus: false},
                {id: 'c29', title: 'Our Shared Dream Board Creation', description: 'Redeem for a creative session where we design a digital or physical vision board of our shared dreams and aspirations.', is18Plus: false},
                {id: 'c30', title: 'No Decision Day (for you)', description: 'Redeem for a day where I take care of all the decisions, big and small, so you can relax and simply enjoy.', is18Plus: false},
                {id: 'c31', title: 'Surprise Coffee/Tea Delivery', description: 'Redeem for your favorite morning beverage, made and delivered right to you in bed.', is18Plus: false},
                {id: 'c32', title: 'Romantic Sunset Watch', description: 'Redeem for an evening dedicated to watching the sunset together from a beautiful spot, with quiet reflection.', is18Plus: false},
                {id: 'c33', title: 'Cuddle Under the Stars (from a balcony/window)', description: 'Redeem for a cozy cuddle session under the stars, even from our own balcony or window, weather permitting.', is18Plus: false},
                {id: 'c34', title: 'Write Our Love Story Together', description: 'Redeem for a creative session where we start writing down the chapters of our love story, as we remember them.', is18Plus: false},
                {id: 'c35', title: 'A Day Dedicated to Your Happiness', description: 'Redeem for a full day where my sole mission is to ensure your happiness and comfort, whatever that entails.', is18Plus: false},
                {id: 'c36', title: 'Personalized Affirmation Loop', description: 'Redeem for a custom recording of me speaking positive affirmations and loving messages directly to you.', is18Plus: false},
                {id: 'c37', title: 'A Silent Understanding Day', description: 'Redeem for a day where we communicate mostly through gestures, looks, and intuitive understanding, for quiet connection.', is18Plus: false},
                {id: 'c38', title: 'Our Favorite Song on Repeat', description: 'Redeem for a dedicated time to listen to our favorite song (or playlist) on repeat, just soaking in the music and each other.', is18Plus: false},
                {id: 'c39', title: 'A Promise for Tomorrow', description: 'Redeem for me to make a special, heartfelt promise to you about our future together.', is18Plus: false},
                {id: 'c40', title: 'The "You Are Amazing" Speech', description: 'Redeem for a heartfelt, spontaneous speech from me about all the amazing qualities I see in you.', is18Plus: false},
                {id: 'c41', title: 'Shared Journal Entry', description: 'Redeem for a session where we write a joint entry in a shared journal about our feelings or a memory.', is18Plus: false},
                {id: 'c42', title: 'A Moment of Deep Connection', description: 'Redeem for a dedicated time to simply look into each other\'s eyes, holding hands, and just *be* present.', is18Plus: false},
                {id: 'c43', title: 'A Secret Surprise Gift', description: 'Redeem for a small, thoughtful surprise gift that I\'ve chosen just for you.', is18Plus: false},
                {id: 'c44', title: 'The Warmest Hug On Demand', description: 'Redeem for a long, comforting hug whenever you need it most, no questions asked.', is18Plus: false},
                {id: 'c45', title: 'A Moment of Shared Silence', description: 'Redeem for dedicated time to just sit in comfortable silence together, enjoying each other\'s presence.', is18Plus: false},
                {id: 'c46', title: 'Personalized "Love You" Message Every Hour', description: 'Redeem for me to send you a unique "I love you" message or thought every hour for a day.', is18Plus: false},
                {id: 'c47', title: 'A Comforting Story/Poem Reading', description: 'Redeem for me to read you a comforting story or a beautiful poem, whatever brings you peace.', is18Plus: false},
                {id: 'c48', title: 'Build a Dream Castle (Minecraft/Game)', description: 'Redeem for us to collaboratively build an elaborate structure in a game like Minecraft, symbolizing our dreams.', is18Plus: false},
                {id: 'c49', title: 'A Serenade (from me)', description: 'Redeem for a personalized serenade from me, whether sung, played, or spoken word.', is18Plus: false},
                {id: 'c50', title: 'The "Happy Tears" Inducer', description: 'Redeem for me to try my best to make you shed happy tears (in a good way!) with a sweet gesture or memory.', is18Plus: false},

                // ACTS OF SERVICE & HELP (50 Coupons)
                {id: 'c51', title: 'The Week of No Dishes', description: 'Redeem for a full week where I take over all dishwashing duties, cheerfully and thoroughly.', is18Plus: false},
                {id: 'c52', title: 'Your Chosen Chore, Done By Me', description: 'Redeem for me to complete any one chore you dislike the most, no questions asked, no complaints.', is18Plus: false},
                {id: 'c53', title: 'The Ultimate Car Detailing', description: 'Redeem for a sparkling clean car, inside and out, done by me with meticulous care.', is18Plus: false},
                {id: 'c54', title: 'Personal Errand Runner for a Day', description: 'Redeem for me to handle all your errands for an entire day, saving you time and effort.', is18Plus: false},
                {id: 'c55', title: 'Dedicated Tech Support Guru', description: 'Redeem for my patient and thorough assistance with any tech issues you\'re facing, until it\'s resolved.', is18Plus: false},
                {id: 'c56', title: 'Complete Laundry Service', description: 'Redeem for me to take care of all your laundry, from washing to folding and putting away, perfectly.', is18Plus: false},
                {id: 'c57', title: 'Grocery Shopping & Delivery', description: 'Redeem for me to do all your grocery shopping and deliver everything right to our home.', is18Plus: false},
                {id: 'c58', title: 'Help with a Tricky Project', description: 'Redeem for my dedicated assistance on any daunting project or task you need an extra hand with.', is18Plus: false},
                {id: 'c59', title: 'Yard Work Assistant', description: 'Redeem for my full help with any outdoor chores, gardening tasks, or lawn care you need done.', is18Plus: false},
                {id: 'c60', title: 'Pet Pampering Session', description: 'Redeem for me to give extra love, attention, and grooming to your beloved pet(s).', is18Plus: false},
                {id: 'c61', title: 'Research & Planning Aid', description: 'Redeem for me to research and plan something for you, like a trip itinerary, a gift, or an event.', is18Plus: false},
                {id: 'c62', title: 'Morning Coffee/Tea Delivered to Bed', description: 'Redeem for your favorite morning beverage, made exactly how you like it, and delivered right to your bedside.', is18Plus: false},
                {id: 'c63', title: 'Dusting & Cleaning Blitz', description: 'Redeem for a focused session of dusting and light cleaning in a room of your choice.', is18Plus: false},
                {id: 'c64', title: 'Organize One Cluttered Area', description: 'Redeem for my help organizing a messy drawer, closet, or small area that\'s been bothering you.', is18Plus: false},
                {id: 'c65', title: 'Trash & Recycling Duty (for a week)', description: 'Redeem for a week of me taking care of all trash and recycling duties, without a reminder.', is18Plus: false},
                {id: 'c66', title: 'Post Office/Bank Run', description: 'Redeem for me to handle your quick errands to the post office or bank.', is18Plus: false},
                {id: 'c67', title: 'Meal Prep Assistance', description: 'Redeem for my help with chopping, dicing, and preparing ingredients for your meal preps.', is18Plus: false},
                {id: 'c68', title: 'Digital File Organization', description: 'Redeem for my help organizing your digital photos or files on your computer.', is18Plus: false},
                {id: 'c69', title: 'Minor Home Repair/Fix', description: 'Redeem for me to take care of a small home repair or fix you\'ve been meaning to get done.', is18Plus: false},
                {id: 'c70', title: 'Gardening Helper', description: 'Redeem for my assistance with watering plants, repotting, or light gardening tasks.', is18Plus: false},
                {id: 'c71', title: '"No Complaint" Listener', description: 'Redeem for a session where I listen to all your complaints or frustrations without offering solutions, just empathy.', is18Plus: false},
                {id: 'c72', title: 'Deep Cleaning (One Item)', description: 'Redeem for a thorough deep clean of one specific item, like the microwave, oven, or fridge.', is18Plus: false},
                {id: 'c73', title: 'Help with Online Forms/Applications', description: 'Redeem for my patient help with filling out any tedious online forms or applications.', is18Plus: false},
                {id: 'c74', title: 'Schedule Management Assistance', description: 'Redeem for my help organizing your calendar or scheduling appointments for a specific period.', is18Plus: false},
                {id: 'c75', title: 'Battery Replacement Service', description: 'Redeem for me to go around and replace all the dead batteries in remotes, clocks, etc.', is18Plus: false},
                {id: 'c76', title: 'Shoe Cleaning Service', description: 'Redeem for me to meticulously clean and shine your favorite pair of shoes.', is18Plus: false},
                {id: 'c77', title: 'Book/DVD Organization', description: 'Redeem for my help organizing your book collection or media library.', is18Plus: false},
                {id: 'c78', title: 'Wardrobe Refresh Consultation', description: 'Redeem for my help going through your wardrobe and offering ideas for new outfits or decluttering.', is18Plus: false},
                {id: 'c79', title: 'Bag/Purse Organization', description: 'Redeem for my assistance in organizing your handbag or backpack, making it tidy and functional.', is18Plus: false},
                {id: 'c80', title: 'Digital Decluttering Session', description: 'Redeem for our joint effort to delete old emails, clear desktop icons, or organize digital files.', is18Plus: false},
                {id: 'c81', title: 'Vacuuming the Whole Place', description: 'Redeem for a thorough vacuuming of every room in our home, leaving it spotless.', is18Plus: false},
                {id: 'c82', title: 'Plant Watering Service (for a week)', description: 'Redeem for a week where I lovingly take care of all your houseplants, ensuring they thrive.', is18Plus: false},
                {id: 'c83', title: 'Warm Towel After Shower', description: 'Redeem for a perfectly warmed towel waiting for you right after your shower or bath.', is18Plus: false},
                {id: 'c84', title: 'Breakfast in Bed (Your Choice)', description: 'Redeem for a delicious breakfast, made to your specifications, and served to you in bed.', is18Plus: false},
                {id: 'c85', title: 'Tech Gadget Cleaning', description: 'Redeem for a meticulous cleaning of your phone, tablet, or laptop screen and exterior.', is18Plus: false},
                {id: 'c86', title: 'Personal Chef for a Night', description: 'Redeem for me to cook a special dinner of your choice, from appetizer to dessert, just for you.', is18Plus: false},
                {id: 'c87', title: 'Remote Control Retrieval', description: 'Redeem for me to find and bring you any missing remote control, no matter where it\'s hiding.', is18Plus: false},
                {id: 'c88', title: 'Blanket Fort Building', description: 'Redeem for a cozy, elaborate blanket fort setup, perfect for movie watching or reading.', is18Plus: false},
                {id: 'c89', title: 'Hair Washing & Scalp Massage', description: 'Redeem for a relaxing hair wash and invigorating scalp massage.', is18Plus: false},
                {id: 'c90', title: 'Tidy Up One Room', description: 'Redeem for me to fully tidy and organize one room of your choice, leaving it pristine.', is18Plus: false},
                {id: 'c91', title: 'Window Cleaning (Interior)', description: 'Redeem for sparkling clean interior windows in one room, letting the sunshine in.', is18Plus: false},
                {id: 'c92', title: 'Dust Bunnies Extermination', description: 'Redeem for a full sweep and removal of all dust bunnies from under furniture and corners.', is18Plus: false},
                {id: 'c93', title: 'Backpack/Bag Cleaning', description: 'Redeem for a thorough cleaning and organization of your most-used bag.', is18Plus: false},
                {id: 'c94', title: 'Charger Cable Management', description: 'Redeem for me to organize all your charging cables, preventing tangles and mess.', is18Plus: false},
                {id: 'c95', title: 'Quick Fix-It Service', description: 'Redeem for me to take care of any quick, small fix-it tasks around the house.', is18Plus: false},
                {id: 'c96', title: 'Wardrobe Planning Assistance', description: 'Redeem for my help planning outfits for a specific event or trip.', is18Plus: false},
                {id: 'c97', title: 'Pillow Fluffing Service', description: 'Redeem for a perfectly fluffed pillow whenever you need extra comfort.', is18Plus: false},
                {id: 'c98', title: 'Personal Playlist Creation', description: 'Redeem for me to create a new music playlist tailored to your current mood or a specific activity.', is18Plus: false},
                {id: 'c99', title: 'Snack Prep Station', description: 'Redeem for a beautifully arranged snack station with all your favorite treats readily available.', is18Plus: false},
                {id: 'c100', title: '"Anything You Need" Hour', description: 'Redeem for one hour where I am entirely at your service for any non-demanding task or help you require.', is18Plus: false},

                // 18+ COUPONS (50 Coupons)
                {id: 'c101', title: 'Passionate Kiss Extravaganza', description: 'Redeem for an extended, deeply passionate kissing session, leaving you breathless.', is18Plus: true},
                {id: 'c102', title: 'Sensual Full Body Massage', description: 'Redeem for a tension-releasing, sensual full body massage, focusing on your pleasure.', is18Plus: true},
                {id: 'c103', title: 'Naughty Night In', description: 'Redeem for a night dedicated to exploring our desires, with no limits on our intimacy and fun.', is18Plus: true},
                {id: 'c104', title: 'Undivided Attention (and more)', description: 'Redeem for an hour of my absolute, undivided attention, leading wherever your desires take us.', is18Plus: true},
                {id: 'c105', title: 'Shower Together, Slowly', description: 'Redeem for a shared, steamy shower experience, with lots of lingering touches and playful moments.', is18Plus: true},
                {id: 'c106', title: 'Strip Tease for Your Eyes Only', description: 'Redeem for a private, personalized strip tease performance, choreographed just for you.', is18Plus: true},
                {id: 'c107', title: 'Midnight Rendezvous', description: 'Redeem for a spontaneous, secret midnight meet-up for some thrilling, unexpected intimacy.', is18Plus: true},
                {id: 'c108', title: 'Fantasy Fulfillment', description: 'Redeem for me to bring one of your unspoken (or spoken!) fantasies to life, within safe boundaries.', is18Plus: true},
                {id: 'c109', title: 'Blindfolded Touch Exploration', description: 'Redeem for a sensory journey where you explore my body by touch while blindfolded, heightening intimacy.', is18Plus: true},
                {id: 'c110', title: 'Dessert Body Paint', description: 'Redeem for a playful session of painting each other with edible body paint and licking it off.', is18Plus: true},
                {id: 'c111', title: 'Role Play of Your Choice', description: 'Redeem for a fun and engaging role-play scenario, where I become your chosen character.', is18Plus: true},
                {id: 'c112', title: 'Lingerie Show', description: 'Redeem for a private fashion show of new or favorite lingerie, performed just for your enjoyment.', is18Plus: true},
                {id: 'c113', title: 'Truth or Dare (Adult Edition)', description: 'Redeem for a game of Truth or Dare, focused on intimate and revealing questions/challenges.', is18Plus: true},
                {id: 'c114', title: 'Personal Erotic Story', description: 'Redeem for me to write and read you a personalized erotic story starring us.', is18Plus: true},
                {id: 'c115', title: 'Lap Dance Just For You', description: 'Redeem for a private, seductive lap dance, designed to ignite your passion.', is18Plus: true},
                {id: 'c116', title: 'Kiss Every Inch', description: 'Redeem for me to slowly and sensually kiss every inch of your body.', is18Plus: true},
                {id: 'c117', title: 'Body Shot Fun', description: 'Redeem for a playful body shot experience using your favorite drink.', is18Plus: true},
                {id: 'c118', title: 'Nude Art Session (You as the Artist)', description: 'Redeem for me to pose nude while you sketch, paint, or simply admire, no judgment.', is18Plus: true},
                {id: 'c119', title: 'Shared Bath with Bubbles & Wine', description: 'Redeem for a romantic and relaxing shared bath, complete with bubbles, wine, and intimacy.', is18Plus: true},
                {id: 'c120', title: 'Couples Yoga (Sensual Flow)', description: 'Redeem for a private couples yoga session, focused on deep stretches, connection, and sensual flow.', is18Plus: true},
                {id: 'c121', title: 'Late Night Conversation & Cuddles', description: 'Redeem for an evening of deep, heartfelt conversation that lasts until we fall asleep in each other\'s arms.', is18Plus: false},
                {id: 'c122', title: 'Breakfast in Bed (Your Choice)', description: 'Redeem for a delicious breakfast, made to your specifications, and served to you in bed.', is18Plus: false},
                {id: 'c123', title: 'Personalized Playlist for Any Mood', description: 'Redeem for a custom music playlist curated by me, perfect for your current mood or a specific activity.', is18Plus: false},
                {id: 'c124', title: 'A Day of Complete Relaxation (No Chores)', description: 'Redeem for a full day where you are exempt from all chores and responsibilities; I\'ll handle everything.', is18Plus: false},
                {id: 'c125', title: 'The Ultimate Back Scratch', description: 'Redeem for an extended, deeply satisfying back scratch session that will make you melt.', is18Plus: false},
                {id: 'c126', title: 'Shared Video Game Adventure', description: 'Redeem for an epic gaming session where we embark on a new cooperative video game adventure together.', is18Plus: false},
                {id: 'c127', title: 'Picnic in the Park (Prepared by Me)', description: 'Redeem for a charming picnic in a beautiful park, complete with all your favorite snacks and drinks, prepared by me.', is18Plus: false},
                {id: 'c128', title: 'Hand-Held Movie Marathon', description: 'Redeem for a cozy movie marathon at home, where we hold hands the entire time, even during scary parts!', is18Plus: false},
                {id: 'c129', title: 'Learning a New Skill Together', description: 'Redeem for us to dedicate time to learning a new skill together, like basic coding, a foreign language, or a craft.', is18Plus: false},
                {id: 'c130', title: 'DIY Spa Night at Home', description: 'Redeem for a relaxing home spa night, complete with face masks, soothing music, and gentle massages.', is18Plus: false},
                {id: 'c131', title: 'A Custom Illustrated Card', description: 'Redeem for a unique, hand-drawn or digitally illustrated card, just for you, featuring a special memory or inside joke.', is18Plus: false},
                {id: 'c132', title: 'Story Time (Any Story You Choose)', description: 'Redeem for me to read aloud any book, short story, or even a fanfiction you desire, with character voices!', is18Plus: false},
                {id: 'c133', title: 'A Walk Down Memory Lane', description: 'Redeem for a dedicated time to look through old photos and videos, reminiscing about our favorite memories.', is18Plus: false},
                {id: 'c134', title: 'Build a Fort (Adult Edition)', description: 'Redeem for us to construct an epic blanket or pillow fort, perfect for cozying up and watching movies.', is18Plus: false},
                {id: 'c135', title: 'The Ultimate Comfort Snack Platter', description: 'Redeem for a beautifully arranged platter of all your favorite comfort snacks, ready for indulgence.', is18Plus: false},
                {id: 'c136', title: 'An Hour of Uninterrupted Compliments', description: 'Redeem for me to shower you with genuine, specific compliments for an entire hour, no interruptions.', is18Plus: false},
                {id: 'c137', title: 'Cook Your Favorite Meal Together', description: 'Redeem for a fun, collaborative cooking session where we prepare your absolute favorite meal together.', is18Plus: false},
                {id: 'c138', title: 'The "Yes, Dear" Day', description: 'Redeem for one day where I will cheerfully agree to all your non-outrageous requests, no questions asked.', is18Plus: false},
                {id: 'c139', title: 'A Digital Detox Day Together', description: 'Redeem for a full day where we both unplug from all screens and enjoy each other\'s company offline.', is18Plus: false},
                {id: 'c140', title: 'Shared Creative Project', description: 'Redeem for us to embark on a small creative project together, like painting, writing, or crafting.', is18Plus: false},
                {id: 'c141', title: 'Surprise Home-Baked Treat', description: 'Redeem for a delicious homemade treat, baked just for you, whenever you least expect it.', is18Plus: false},
                {id: 'c142', title: 'A Sincere Apology (if needed)', description: 'Redeem for a heartfelt and sincere apology for any past misstep, delivered with full understanding.', is18Plus: false},
                {id: 'c143', title: 'Custom-Made Playlist (Acoustic/Chill)', description: 'Redeem for a soothing acoustic or chill playlist specially curated for your relaxation.', is18Plus: false},
                {id: 'c144', title: 'Long Hug & Comfort Session', description: 'Redeem for a long, comforting hug and a session where I listen to anything on your mind, offering solace.', is18Plus: false},
                {id: 'c145', title: 'A Day of Mutual Appreciation', description: 'Redeem for a day where we both make a conscious effort to express our appreciation for each other constantly.', is18Plus: false},
                {id: 'c146', title: 'Movie Character Marathon (Costumes Encouraged)', description: 'Redeem for a movie marathon where we dress up as characters from your favorite film series.', is18Plus: false},
                {id: 'c147', title: 'Shared Online Course/Workshop', description: 'Redeem for us to enroll in and complete an online course or workshop together on a topic of interest.', is18Plus: false},
                {id: 'c148', title: 'A Handwritten "Reasons I Love You" Card', description: 'Redeem for a beautifully handwritten card detailing new and specific reasons why I love you.', is18Plus: false},
                {id: 'c149', title: 'Relaxing Head Massage', description: 'Redeem for a soothing and tension-relieving head massage, perfect for unwinding.', is18Plus: false},
                {id: 'c150', title: 'Spontaneous Adventure (Day Trip)', description: 'Redeem for an unplanned, exciting day trip to a new place or a favorite spot, just for us.', is18Plus: false},
                // Even more 18+ coupons
                {id: 'c151', title: 'Intimate Game Night', description: 'Redeem for a night of board games or card games, where the stakes (and clothing) get progressively lower.', is18Plus: true},
                {id: 'c152', title: 'Sensory Exploration Session', description: 'Redeem for an intimate session focusing on heightened senses: touch, taste, smell, just for us.', is18Plus: true},
                {id: 'c153', title: 'Private Dance Performance', description: 'Redeem for a personal, sensual dance performance in your favorite outfit, designed to captivate.', is18Plus: true},
                {id: 'c154', title: 'Extended Lingerie Show', description: 'Redeem for an extended, detailed showcase of my most alluring lingerie, with commentary and poses for you.', is18Plus: true},
                {id: 'c155', title: 'Tantric Touch Experience', description: 'Redeem for an introduction to sensual, connection-focused tantric touch, for deepening our bond.', is18Plus: true},
                {id: 'c156', title: 'Bedroom Scavenger Hunt', description: 'Redeem for a playful scavenger hunt leading to an intimate surprise in the bedroom.', is18Plus: true},
                {id: 'c157', title: 'Body Icing & Licking', description: 'Redeem for a playful and cooling session of applying ice to skin and licking it off.', is18Plus: true},
                {id: 'c158', title: 'Role Play: Master/Servant', description: 'Redeem for a role-play scenario where you are the master and I am your willing servant for an hour.', is18Plus: true},
                {id: 'c159', title: 'Private Photo Shoot (Intimate)', description: 'Redeem for a private, intimate photo shoot where I pose for your eyes only, capturing raw sensuality.', is18Plus: true},
                {id: 'c160', title: 'Blindfolded Tasting & Teasing', description: 'Redeem for a blindfolded experience involving delicious (and sometimes surprising) tastes and teasing touches.', is18Plus: true},
                {id: 'c161', title: 'Truth or Dare: No Limits', description: 'Redeem for an adult version of Truth or Dare with truly no limits on questions or challenges.', is18Plus: true},
                {id: 'c162', title: 'Bondage Play Introduction', description: 'Redeem for a consensual and safe introduction to light bondage play, exploring new sensations.', is18Plus: true},
                {id: 'c163', title: 'Wax Play (Safe & Consensual)', description: 'Redeem for a controlled and consensual wax play session, exploring temperature and sensation.', is18Plus: true},
                {id: 'c164', title: 'Sensual Reading for Two', description: 'Redeem for me to read aloud from an erotic novel or poetry, setting a sensual mood.', is18Plus: true},
                {id: 'c165', title: 'Custom Bedroom Playlist', description: 'Redeem for a special playlist curated for intimacy and passion, designed to enhance our private moments.', is18Plus: true},
                {id: 'c166', title: 'Tied Up & Teased', description: 'Redeem for a consensual session where I am tied up (safely) and teased, with your full control.', is18Plus: true},
                {id: 'c167', title: 'Body Paint Art (Interactive)', description: 'Redeem for a session where we both get to apply body paint on each other and then play.', is18Plus: true},
                {id: 'c168', title: 'Foreplay Focus Session', description: 'Redeem for an entire session dedicated purely to foreplay, exploring every touch and sensation slowly.', is18Plus: true},
                {id: 'c169', title: 'Pleasure Tool Exploration', description: 'Redeem for a guided session exploring pleasure tools together, discovering new ways to delight.', is18Plus: true},
                {id: 'c170', title: 'Erotic Hypnosis (Guided)', description: 'Redeem for a guided erotic hypnosis session designed to deepen pleasure and connection.', is18Plus: true},
                // Even more coupons to reach 170+
                {id: 'c171', title: 'A Week of Good Morning Kisses', description: 'Redeem for a heartfelt, lingering good morning kiss every day for a full week.', is18Plus: false},
                {id: 'c172', title: 'Personal Coffee Barista', description: 'Redeem for me to be your personal coffee barista, making your favorite coffee drinks on demand for a day.', is18Plus: false},
                {id: 'c173', title: 'Custom-Made Dessert', description: 'Redeem for a homemade dessert of your choice, crafted with love and your favorite ingredients.', is18Plus: false},
                {id: 'c174', title: 'Organize Your Digital Photos', description: 'Redeem for my help organizing your digital photo collection into albums and folders.', is18Plus: false},
                {id: 'c175', title: 'A Day of Nostalgia (Recreate a Favorite Memory)', description: 'Redeem for us to recreate a cherished memory or a favorite past activity together.', is18Plus: false},
                {id: 'c176', title: 'Private Acapella Concert', description: 'Redeem for a small, intimate acapella concert performed by me, featuring your favorite songs.', is18Plus: false},
                {id: 'c177', title: 'Shared Art Class (Online or Local)', description: 'Redeem for us to take an art class together, exploring painting, pottery, or drawing.', is18Plus: false},
                {id: 'c178', title: 'A Month of No Laundry Folding', description: 'Redeem for one entire month where I handle all laundry folding, from dryer to drawer.', is18Plus: false},
                {id: 'c179', title: 'Personalized Bedtime Story', description: 'Redeem for me to read or invent a personalized bedtime story for you, to help you drift off to sleep.', is18Plus: false},
                {id: 'c180', title: 'Cozy Fireplace Reading Session', description: 'Redeem for a cozy evening by a fireplace (real or digital) reading books or stories together.', is18Plus: false},
                {id: 'c181', title: 'Sensual Shower Play', description: 'Redeem for a playful and intimate session during our shower, focusing on touch and exploration.', is18Plus: true},
                {id: 'c182', title: 'Desire-Driven Kissing', description: 'Redeem for a kissing session where every kiss is driven by your specific desires and cues.', is18Plus: true},
                {id: 'c183', title: 'Bound & Blindfolded (Consensual)', description: 'Redeem for a consensual session where I am safely bound and blindfolded, enhancing your control.', is18Plus: true},
                {id: 'c184', title: 'Strip Poker Night', description: 'Redeem for a fun and exciting game of strip poker, where we play to lose (our clothes!).', is18Plus: true},
                {id: 'c185', title: 'Erotic Scene Recreation', description: 'Redeem for us to recreate a favorite erotic scene from a movie, book, or fantasy, with full commitment.', is18Plus: true},
                {id: 'c186', title: 'Body Painting Session (Full Body)', description: 'Redeem for a full body painting session where we get creative with paints and then clean up intimately.', is18Plus: true},
                {id: 'c187', title: 'Outdoor Interlude (Private Location)', description: 'Redeem for a thrilling and private intimate encounter in a secluded outdoor location, if safe and consensual.', is18Plus: true},
                {id: 'c188', title: 'Whispers of Desire', description: 'Redeem for a session where I whisper your deepest desires and fantasies into your ear, bringing them to life.', is18Plus: true},
                {id: 'c189', title: 'The Ultimate Tease', description: 'Redeem for a session dedicated purely to teasing, building anticipation and desire without immediate release.', is18Plus: true},
                {id: 'c190', title: 'Interactive Erotic Storytelling', description: 'Redeem for a co-created erotic story where we take turns adding to the narrative, making it truly ours.', is18Plus: true},
            ];

            // --- LOCAL STORAGE KEY ---
            const REDEEMED_COUPONS_KEY = 'myLoveCouponsRedeemed';
            // Load redeemed coupons from localStorage
            let redeemedCouponIds = JSON.parse(localStorage.getItem(REDEEMED_COUPONS_KEY) || '[]');

            // --- FUNCTIONS ---

            /**
             * Renders all coupons onto the page.
             */
            function renderCoupons() {
                couponContainer.innerHTML = ''; // Clear existing coupons
                // Array of soft pastel background colors for the coupons
                const couponBgColors = ['var(--coupon-bg-1)', 'var(--coupon-bg-2)', 'var(--coupon-bg-3)', 'var(--coupon-bg-4)', 'var(--coupon-bg-5)', 'var(--coupon-bg-6)'];

                coupons.forEach((coupon, index) => {
                    const couponCard = document.createElement('div');
                    couponCard.classList.add('coupon-card');
                    couponCard.dataset.id = coupon.id; // Store coupon ID on the element
                    // Apply rotating background color from the pastel palette
                    couponCard.style.backgroundColor = couponBgColors[index % couponBgColors.length];

                    let tagsHtml = '';
                    if (coupon.is18Plus) {
                        tagsHtml += `<span class="tag-18plus">18+</span>`;
                    }

                    couponCard.innerHTML = `
                        ${tagsHtml}
                        <h2>${coupon.title}</h2>
                        <p>${coupon.description}</p>
                        <button class="btn" data-coupon-id="${coupon.id}">Redeem</button>
                    `;

                    // Check if coupon is already redeemed and apply class
                    if (redeemedCouponIds.includes(coupon.id)) {
                        couponCard.classList.add('redeemed');
                    }

                    couponContainer.appendChild(couponCard);
                });

                // Attach event listeners after all cards are added to DOM
                attachRedeemListeners();
            }

            /**
             * Attaches click event listeners to all "Redeem" buttons.
             */
            function attachRedeemListeners() {
                document.querySelectorAll('.coupon-card .btn').forEach(button => {
                    button.addEventListener('click', (event) => {
                        currentCouponId = event.target.dataset.couponId;
                        redeemModal.style.display = 'flex'; // Show modal
                    });
                });
            }

            /**
             * Handles the confirmation of coupon redemption.
             */
            function confirmRedemption() {
                if (currentCouponId) {
                    // Find the coupon card element
                    const couponCard = document.querySelector(`.coupon-card[data-id="${currentCouponId}"]`);
                    if (couponCard && !redeemedCouponIds.includes(currentCouponId)) {
                        couponCard.classList.add('redeemed');
                        redeemedCouponIds.push(currentCouponId); // Add to redeemed list
                        localStorage.setItem(REDEEMED_COUPONS_KEY, JSON.stringify(redeemedCouponIds)); // Save to localStorage
                    }
                }
                redeemModal.style.display = 'none'; // Hide modal
                currentCouponId = null; // Reset current coupon ID
            }

            /**
             * Handles cancellation of coupon redemption.
             */
            function cancelRedemption() {
                redeemModal.style.display = 'none'; // Hide modal
                currentCouponId = null; // Reset current coupon ID
            }

            // --- MODAL EVENT LISTENERS ---
            confirmRedeemBtn.addEventListener('click', confirmRedemption);
            cancelRedeemBtn.addEventListener('click', cancelRedemption);
            closeModalBtn.addEventListener('click', cancelRedemption);
            // Close modal if clicking outside the modal content
            window.addEventListener('click', (event) => {
                if (event.target == redeemModal) {
                    cancelRedemption();
                }
            });

            // --- CARD ENTRANCE ANIMATION LOGIC (Intersection Observer) ---
            // Select all coupon cards for animation
            const allCouponCards = document.querySelectorAll('.coupon-card');

            // Options for the Intersection Observer
            const observerOptions = {
                root: null, // Use the viewport as the root
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the item is visible
            };

            // Callback function for when an observed element enters/leaves the viewport
            const cardObserverCallback = (entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Element is visible, add the 'card-visible' class
                        const card = entry.target;
                        // Calculate index for staggered delay (assuming cards are in DOM order)
                        const index = Array.from(allCouponCards).indexOf(card);
                        card.style.setProperty('--card-delay', `${index * 0.08}s`); // Staggered delay (0.08s per card)
                        card.classList.add('card-visible');
                        // Stop observing once the animation is triggered
                        observer.unobserve(card);
                    }
                });
            };

            // Create a new Intersection Observer
            const cardObserver = new IntersectionObserver(cardObserverCallback, observerOptions);

            // --- INITIALIZATION ---
            renderCoupons(); // Render coupons when the page loads

            // Observe each coupon card for entrance animation
            document.querySelectorAll('.coupon-card').forEach(card => {
                cardObserver.observe(card);
            });
        });
    </script>
</body>

</html>
